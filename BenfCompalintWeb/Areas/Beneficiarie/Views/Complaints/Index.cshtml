
@model IEnumerable<Compalint>








<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="breadcrumb-wrapper py-3 mb-4">
        <span class="text-muted fw-light">إدارة النظام    /</span> إدارة الشكاوي
    </h4>



    <div class="card">

        <div class="row mx-2  ">
            <div class="col-6">
                <div class="t-d">
                    <h5 class="card-header title-t" style="margin-left: 10px;"> إدارة الشكاوي</h5>
                </div>

            </div>


        </div>


        <div class="card-datatable table-responsive">

            <div class="row mx-2 border-bottom ">

                <div class="me-3 table-type">
                    <label class="form-label"> عرض حسب</label>
                    <div class="dataTables_length" id="DataTables_Table_0_length">

                        <div class="position-relative">
                            <div class="position-relative">
                                <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0"
                                        class="select2 form-select select2-hidden-accessible"
                                        tabindex="-1" aria-hidden="true" data-select2-id="10">
                                    <option value="10" data-select2-id="12">مرفوضة</option>
                                    <option value="25">محلولة</option>
                                    <option value="50">غير محلولة</option>
                                    <option value="100">مرفوعة</option>
                                </select><span class="select2 select2-container select2-container--default select2-container--focus" dir="rtl" data-select2-id="11" style="width: 117.083px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-DataTables_Table_0_length-np-container"><span class="select2-selection__rendered" id="select2-DataTables_Table_0_length-np-container" role="textbox" aria-readonly="true" title="مرفوضة">مرفوضة</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                        </div>
                        <div class="position-relative">
                            <div class="position-relative">
                                <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0"
                                        class="select2 form-select select2-hidden-accessible"
                                        tabindex="-1" aria-hidden="true" data-select2-id="10">
                                    <option value="10" data-select2-id="12">مرفوضة</option>
                                    <option value="25">محلولة</option>
                                    <option value="50">غير محلولة</option>
                                    <option value="100">مرفوعة</option>
                                </select><span class="select2 select2-container select2-container--default select2-container--focus" dir="rtl" data-select2-id="11" style="width: 117.083px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-DataTables_Table_0_length-np-container"><span class="select2-selection__rendered" id="select2-DataTables_Table_0_length-np-container" role="textbox" aria-readonly="true" title="مرفوضة">مرفوضة</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                        </div>
                        <div class="position-relative">
                            <div class="position-relative">
                                <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0"
                                        class="select2 form-select select2-hidden-accessible"
                                        tabindex="-1" aria-hidden="true" data-select2-id="10">
                                    <option value="10" data-select2-id="12">مرفوضة</option>
                                    <option value="25">محلولة</option>
                                    <option value="50">غير محلولة</option>
                                    <option value="100">مرفوعة</option>
                                </select><span class="select2 select2-container select2-container--default select2-container--focus" dir="rtl" data-select2-id="11" style="width: 117.083px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-DataTables_Table_0_length-np-container"><span class="select2-selection__rendered" id="select2-DataTables_Table_0_length-np-container" role="textbox" aria-readonly="true" title="مرفوضة">مرفوضة</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                        </div>

                    </div>
                </div>
                @*<div class="row">
                        <label class="form-label"> عرض حسب</label>
                        <div class="col-md-2">
                            <div class="dataTables_length" id="DataTables_Table_0_length">
                                <label>
                                    <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0" class="select2 form-select">
                                        <option value="0">الحالة</option>
                                        <option value="محلولة">محلولة</option>
                                        <option value="مرفوضة">مرفوضة</option>
                                        <option value="مقبولة">مقبولة</option>
                                    </select>
                                </label>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="dataTables_length " id="DataTables_Table_0_length">
                                <label>
                                    <select class="form-control" id="FilterType" asp-items="@ViewBag.StatusCompalints">
                                        <option value="0"> النوع</option>

                                    </select>
                                </label>
                            </div>
                        </div>
                        <div class=" col-md-2">
                            <div class="dataTables_length " id="DataTables_Table_0_length">
                                <label>
                                    <select name="DataTables_Table_0_length" aria-controls="DataTables_Table_0" class="select2 form-select">
                                        <option value="10">المحافظة</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </label>
                            </div>
                        </div>
                    </div>*@

                <div class="row">
                    <div class="col-6">
                        <div class="dropdown" style="text-align-last: end;">


                            <span class="badge bg-label-primary badgess " style="    padding-left: 36px;
                        line-height: 1.99;
                        width: 152.35px;">العدد الكلي 876</span>

                        </div>

                    </div>


                    <div class="col">
                        <button type="button" asp-action="AddCompalint" class="btn btn-primary btn-customized"><span><i class="bx bx-plus me-0 me-lg-2"></i><span class="d-none d-lg-inline-block">اضافة شكوى</span></span></button>
                    </div>




                </div>

            </div>


            <div class="table-responsive text-nowrap">
                <table id="dataTable" class="table table-striped" style="width:100%">

                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.TitleComplaint)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CompDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Governorates)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.StagesComplaint)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.StatusCompalint)
                            </th>
                            <th>اجراء</th>
                        </tr>
                    </thead>

                    <tbody>
                        @if (Model.Count() == 0)
                        {
                            <tr>
                                <td colspan="3" style="color:red">
                                    لا يوجد نتائج
                                </td>
                            </tr>
                        }
                        else
                        {
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.TitleComplaint)
                                    </td>
                                    <td> @Html.DisplayFor(modelItem => item.CompDate)</td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Governorates.Name)
                                    </td>
                                    <td> @Html.DisplayFor(modelItem => item.StatusCompalint.Name)</td>
                                    <td> @Html.DisplayFor(modelItem => item.TypeComplaint.Type)</td>
                                    <td>
                                        <a href="@Url.Action("ViewCompalintDetails", "Complaints", new { id = item.Id })">
                                            <i> عرض</i>
                                        </a>
                                    </td>
                                </tr>
                            }
                        }

                    </tbody>
                </table>
            </div>

        </div>
    </div>

</div>






<script src="/assets/js/Cascading/jquery-3.5.1.js"></script>
<script src="/assets/js/Cascading/dataTables.bootstrap5.min.js"></script>
<script src="/assets/js/Cascading/jquery.dataTables.min.js"></script>>


<script>
    $(document).ready(function () {
        $('#dataTable').DataTable({
            "language": {
                "lengthMenu": "عرض _MENU_ سجلات  ",

                "info": "عرض صفحة _PAGE_ من _PAGES_",
                "infoEmpty": "ليس هناك اي بيانات متاحة",
                "infoFiltered": "(الصافي من  _MAX_ اجمالي الصفوف)",
                "search": "بحث"
            }


        });
    });
</script>





<script>
    //فلترة نوع الشاكي
    $("#FilterType").change(function () {
        var value = $(this).val().toLowerCase();
        $(".table tbody tr").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
        });
    });
    //
</script>
<script>

    $("#typeComp").change(function () {
        var value = $(this).val().toLowerCase();
        $(".table tbody tr").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
        });
    });

</script>
